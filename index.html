<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>FoodBot WebApp</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
/* ================= –û–±—â–∏–µ —Å—Ç–∏–ª–∏ ================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    font-family: 'Inter', sans-serif;
}

body {
    background: linear-gradient(135deg, #0f2027, #203a43, #2c5364);
    color: white;
    padding: 15px;
}

h1 {
    text-align: center;
    font-weight: 800;
    margin-bottom: 20px;
}

.hidden {
    display: none;
}

/* ================= Glass –∫–∞—Ä—Ç–æ—á–∫–∏ ================= */
.glass {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(20px);
    border-radius: 20px;
    padding: 20px;
    margin-bottom: 20px;
}

.center {
    text-align: center;
}

.choice-btn {
    padding: 14px;
    border: none;
    border-radius: 15px;
    background: #ff7b00;
    color: white;
    font-weight: 600;
    cursor: pointer;
    margin-top: 10px;
    width: 100%;
    transition: 0.3s;
}

.choice-btn:hover {
    background: #ff9500;
    transform: scale(1.03);
}

input {
    width: 100%;
    padding: 12px;
    border-radius: 12px;
    border: none;
    margin-top: 10px;
    font-size: 14px;
}

/* ================= –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ ================= */
.categories {
    display: flex;
    gap: 10px;
    overflow-x: auto;
    margin-bottom: 20px;
}

.cat-btn {
    padding: 10px 16px;
    border-radius: 25px;
    background: rgba(255, 255, 255, 0.1);
    border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
    white-space: nowrap;
    transition: 0.3s;
}

.cat-btn:hover {
    background: #ff7b00;
}

/* ================= –ú–µ–Ω—é ================= */
.menu {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
    gap: 15px;
}

.card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(15px);
    border-radius: 20px;
    padding: 12px;
    transition: 0.4s;
}

.card:hover {
    transform: translateY(-5px) scale(1.03);
}

.card img {
    width: 100%;
    height: 120px;
    object-fit: cover;
    border-radius: 15px;
    margin-bottom: 10px;
}

.price {
    font-weight: 600;
    margin-bottom: 8px;
}

.card button {
    width: 100%;
    padding: 8px;
    border: none;
    border-radius: 10px;
    background: #ff7b00;
    color: white;
    cursor: pointer;
}

.card button:hover {
    background: #ff9500;
}

/* ================= –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã ================= */
.cart {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff7b00;
    padding: 14px 25px;
    border-radius: 30px;
    font-weight: 600;
    cursor: pointer;
    box-shadow: 0 5px 20px rgba(0,0,0,0.3);
}

/* ================= –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã ================= */
.modal {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.6);
    backdrop-filter: blur(8px);
    justify-content: center;
    align-items: center;
    z-index: 100;
}

.modal-content {
    background: #1c2a35;
    padding: 25px;
    border-radius: 20px;
    width: 90%;
    max-width: 350px;
}

.qr {
    width: 200px;
    height: 200px;
    margin: 0 auto 15px;
    background: linear-gradient(45deg,#fff,#ddd);
    border-radius: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #000;
    font-weight: 600;
}

.success {
    text-align: center;
    color: #4CAF50;
    margin-top: 10px;
}
</style>
</head>
<body>

<h1>üçΩ FoodBot Premium</h1>

<!-- ================= –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ ================= -->
<div id="startChoice" class="glass">
    <div class="center">
        <h2>–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –∑–∞–∫–∞–∑–∞</h2>
        <button class="choice-btn" onclick="chooseType('cafe')">üè™ –í –∫–∞—Ñ–µ</button>
        <button class="choice-btn" onclick="chooseType('delivery')">üöö –î–æ—Å—Ç–∞–≤–∫–∞</button>
    </div>
</div>

<!-- ================= –ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ ================= -->
<div id="addressBlock" class="glass hidden">
    <h3>–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏</h3>
    <input type="text" id="addressInput" placeholder="–ì–æ—Ä–æ–¥, —É–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞">
    <button class="choice-btn" onclick="saveAddress()">–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å</button>
</div>

<!-- ================= –ú–µ–Ω—é ================= -->
<div id="menuBlock" class="hidden">
    <div class="categories">
        <div class="cat-btn" onclick="showCategory('burger')">üçî –ë—É—Ä–≥–µ—Ä—ã</div>
        <div class="cat-btn" onclick="showCategory('pizza')">üçï –ü–∏—Ü—Ü–∞</div>
        <div class="cat-btn" onclick="showCategory('shawarma')">üåØ –®–∞–≤–µ—Ä–º–∞</div>
        <div class="cat-btn" onclick="showCategory('rolls')">üç£ –†–æ–ª–ª—ã</div>
        <div class="cat-btn" onclick="showCategory('chicken')">üçó –ö—É—Ä–∏—Ü–∞</div>
    </div>
    <div class="menu" id="menu"></div>
</div>

<!-- ================= –ö–Ω–æ–ø–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã ================= -->
<div class="cart hidden" id="cartBtn" onclick="openPayment()">
üõí –û–ø–ª–∞—Ç–∏—Ç—å (<span id="total">0</span> —Å–æ–º)
</div>

<!-- ================= –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –æ–ø–ª–∞—Ç—ã ================= -->
<div class="modal" id="paymentModal">
    <div class="modal-content">
        <h3 style="text-align:center;margin-bottom:15px;">–û–ø–ª–∞—Ç–∞ —á–µ—Ä–µ–∑ MBank</h3>
        <div class="qr">QR CODE</div>
        <button onclick="paid()">–Ø –æ–ø–ª–∞—Ç–∏–ª</button>

        <div id="afterPay" class="hidden">
            <p class="success">–ó–∞–∫–∞–∑ –æ—Ñ–æ—Ä–º–ª–µ–Ω ‚úÖ</p>
            <input type="file" id="checkInput">
            <button style="margin-top:10px" onclick="sendToBot()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —á–µ–∫</button>
        </div>
    </div>
</div>
<script src="https://telegram.org/js/telegram-web-app.js?59"></script>
<script>
let tg = window.Telegram.WebApp;
tg.expand();
let orderType = null;
let address = null;
let total = 0;

// ================= –ú–µ–Ω—é =================
const menuData = {
    burger: [
        {name:"–ß–∏–∑–±—É—Ä–≥–µ—Ä",price:150,img:"https://images.unsplash.com/photo-1568901346375-23c9450c58cd"},
        {name:"–ú–∏–Ω–∏-–±—É—Ä–≥–µ—Ä",price:120,img:"https://images.unsplash.com/photo-1550547660-d9450f859349"}
    ],
    pizza: [
        {name:"–ü–µ–ø–ø–µ—Ä–æ–Ω–∏",price:500,img:"https://images.unsplash.com/photo-1601924638867-3ec2f1a8f3e2"}
    ],
    shawarma: [
        {name:"–®–∞–≤–µ—Ä–º–∞ —Å –∫—É—Ä–∏—Ü–µ–π",price:230,img:"https://images.unsplash.com/photo-1604908176997-431b4d1c9d60"}
    ],
    rolls: [
        {name:"–§–∏–ª–∞–¥–µ–ª—å—Ñ–∏—è",price:550,img:"https://images.unsplash.com/photo-1553621042-f6e147245754"}
    ],
    chicken: [
        {name:"–ö—Ä—ã–ª—ã—à–∫–∏",price:300,img:"https://images.unsplash.com/photo-1600891964599-f61ba0e24092"}
    ]
};

// ================= –§—É–Ω–∫—Ü–∏–∏ =================
function chooseType(type){
    orderType = type;
    document.getElementById("startChoice").classList.add("hidden");
    if(type === "delivery"){
        document.getElementById("addressBlock").classList.remove("hidden");
    } else {
        showMenu();
    }
}

function saveAddress(){
    address = document.getElementById("addressInput").value;
    if(!address) return alert("–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å");
    document.getElementById("addressBlock").classList.add("hidden");
    showMenu();
}

function showMenu(){
    document.getElementById("menuBlock").classList.remove("hidden");
    document.getElementById("cartBtn").classList.remove("hidden");
}

function showCategory(cat){
    const menu = document.getElementById("menu");
    menu.innerHTML = "";
    menuData[cat].forEach(item => {
        menu.innerHTML += `
            <div class="card">
                <img src="${item.img}">
                <h3>${item.name}</h3>
                <div class="price">${item.price} —Å–æ–º</div>
                <button onclick="add(${item.price},'${item.name}')">–î–æ–±–∞–≤–∏—Ç—å</button>
            </div>
        `;
    });
}

function add(price,name){
    total += price;
    document.getElementById("total").innerText = total;
    if(!window.items) window.items = [];
    window.items.push(name);
}

function openPayment(){
    if(total === 0) return alert("–î–æ–±–∞–≤—å—Ç–µ –±–ª—é–¥–∞!");
    document.getElementById("paymentModal").style.display = "flex";
}

function paid(){
    document.getElementById("afterPay").classList.remove("hidden");
}

// ================= –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç–∞ =================
function sendToBot(){
    const file = document.getElementById("checkInput").files[0];
    if(!file) return alert("–ó–∞–≥—Ä—É–∑–∏—Ç–µ —á–µ–∫!");

    const data = {
        orderType: orderType,
        address: address,
        total: total,
        fileName: file.name,
        items: window.items || []
    };
    
    tg.sendData(JSON.stringify(data));
    alert("–î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –±–æ—Ç—É!"); // –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    tg.close();
}
</script>

</body>
</html>
